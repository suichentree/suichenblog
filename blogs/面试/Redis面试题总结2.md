---
title: Redis面试题总结2
date: 2023-11-21
sidebar: 'auto'
categories:
 - 面试
tags:
 - Redis
---

[toc]

# Redis面试题总结2

## Redis 的同步机制是什么？

Redis 可以使用主从同步，从从同步。
1. 第一次同步，主机执行bgsave命令，生成rdb持久化文件，并将同步期间的后续写操作存储到内存中。
2. 当rdb文件创建完毕后，将rdb文件发送给从机。让从机执行rdb文件。
3. 当从机执行完rdb文件后，再通知主机将同步期间的写操作数据，发送给从机。让从机执行一遍。
4. 最后同步过程就完成了。


## redis集群的数据分配机制

在redis集群中，redis是如何把数据分配到集群中的每一个节点的。

Redis集群没有使用一致性hash算法,而是引入了哈希槽的概念，Redis集群有16384个哈希槽，每个key通过CRC16校验后对16384取模来决定放置哪个槽，集群的每个节点负责一部分hash槽。

1. 每一个数据的键被哈希函数映射到一个槽位。
2. 当用户put或者是get一个数据的时候，首先会查找这个数据对应的槽位是多少，然后查找对应的节点，然后才把数据放入这个节点。
3. 这样就做到了把数据均匀的分配到集群中的每一个节点上，从而做到了每一个节点的负载均衡，充分发挥了集群的威力。
