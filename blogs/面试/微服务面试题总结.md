---
title: 微服务面试题总结
date: 2023-12-05
sidebar: 'auto'
categories: 
 - 面试
tags:
 - 微服务
---

[toc]

# 微服务面试题总结

## 什么是微服务？

微服务架构是一种架构模式或者说是一种架构风格。

微服务提倡将单一应用程序划分为一个个的服务，每个服务运行在其独立的自己的进程中，服务之间相互协调、互相配合，最终实现系统中的功能。

微服务中服务与服务之间采用轻量级的通信机制互相沟通,每个服务都围绕着具体的业务进行构建，并且能够被独立的构建在生产环境、类生产环境等。

## 微服务设计一般都遵循什么原则？

1. 单一职责原则：服务与服务之间互相独立。每个服务只处理自己的业务。做到高内聚，低耦合。
2. 服务自治原则：每个服务都能做到独立开发，独立测试，独立部署，独立运行。让服务与其他服务进行解耦。
3. 轻量通信原则：服务与服务之间的通信调用是轻量级的，并且能够跨平台，跨语言的。

## 什么是RESTFUL？

RESTFUL是一种编码约定。对于同一个接口，根据http请求方式的不同，来实现不同的功能。

- 对于get请求，接口实现查询功能。
- 对于post请求，接口实现新增功能。
- 对于put请求，接口实现修改功能。
- 对于delet请求，接口实现删除功能。

## 负载平衡的意义什么？

在计算中，负载平衡可以改善跨计算机，计算机集群，网络链接，中央处理单元或磁盘驱动器等多种计算资源的工作负载分布。负载平衡旨在优化资源使用，最大化吞吐量，最小化响应时间并避免任何单一资源的过载。使用多个组件进行负载平衡而不是单个组件可能会通过冗余来提高可靠性和可用性。负载平衡通常涉及专用软件或硬件，例如多层交换机或域名系统服务器进程。

## Ribbon的原理是什么？

1. 通过拦截器将被注解@LoadBalanced修改的请求进行拦截。
2. 将请求中的服务名信息，会根据注册中心的注册表，解析成具体的ip地址。如果服务名对于多个ip地址，那么ribbon在选择地址的时候，会进行负载均衡。
3. 当确定好ip地址的时候，ribbon会放行请求。

## 服务注册与发现

### 什么是服务注册？

服务注册本质上就是维护一个服务表。它管理系统内所有服务的信息。当新的服务启动后，它会向服务表提交自己的信息。

如果某个服务需要调用其他服务，那么服务的调用方直接向服务表获取其他服务的信息即可。

服务注册必须要做到以下几点。
- 所有服务的信息都必须注册到服务表中
- 一个服务可以通过服务表，去获取到其他服务的信息。
- 每当系统中有服务增减，服务表要及时更新自己的信息。

### 如何设计一个注册中心，需要哪些接口？

- 服务注册接口：把服务注册到注册中心的功能。
- 服务心跳接口：检测注册中心的服务是否有效或者网络是否连通。
- 服务下线接口：把服务从注册中心中下线。
- 服务剔除接口：注册中心将无效的服务，从注册中心表中删除的功能。
- 查询服务接口：给其他服务提供注册中心的注册表的信息。
- 注册表同步接口：当注册中心是集群的时候，提供一个互相之间同步注册表的接口。


## API网关

### 什么是API网关？

API网关 是一个服务器，也是客户端进入系统的入口节点。

所有来自客户端的请求都要先经过 API网关，然后API网关把客户端请求路由到对应的微服务。


API网关的安全认证方式如下：
1. 基于 Token 的客户端访问控制和安全策略
2. 传输数据和报文加密，到服务端解密。需要客户端有独立的 SDK 代理包
3. 基于 Https 的传输加密，客户端和服务端数字证书支持
4. 基于 OAuth2.0 的服务安全认证（授权码，客户端，密码模式等）

## 配置中心

### 什么是配置中心？

配置中心一般用于分布式系统的参数配置，它需要满足如下几个要求：高效获取、实时感知、分布式访问。

## 服务调用

### 什么是服务调用？

服务调用是用于在分布式系统中，一个服务如何调用其他服务的。

## 服务追踪

### 什么是服务追踪？

随着微服务数量不断增长，我们需要跟踪一个请求从一个微服务到下一个微服务的传播过程。


## 服务熔断

### 什么是服务熔断？

服务熔断就是当服务发生故障的时候，如何进行解救的一种机制。

在微服务架构中一个业务功能通常有多个服务的参与。因此某个基础服务的故障可能会导致某个业务功能故障，进而导致整个系统的不可用情况。

而当服务发生故障的时候，为了不让故障服务去影响其他服务的正常使用。我们需要通过服务熔断机制来限制故障服务的调用。例如让故障服务直接返回默认值等。

并且服务熔断也会检测故障服务是否恢复正常。如果恢复正常，那么就不再熔断该服务。

### 什么是服务降级？

服务降级，一般是从整体负荷考虑。就是当某个故障服务被熔断之后，故障服务将不再被调用，此时客户端可以自己准备一个本地的fallback回调，返回一个缺省值。这样做，虽然水平下降，但好歹可用，比直接挂掉强。


### 熔断和降级的区别？

相同性：熔断和降级都是一种机制。为了防止系统整体响应缓慢的机制。

不同性：熔断一般是某个业务功能中的服务（下游服务）故障导致的。而降级一般是某个服务对于大流量的请求处理缓慢，为了让服务的响应时间加快，从而限制降低了服务的请求处理。


